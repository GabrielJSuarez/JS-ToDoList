(()=>{"use strict";var t={d:(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{I:()=>o,i:()=>r});const e=(()=>{const t=()=>{const t=document.forms["tasks-form"];return t.addEventListener("submit",(t=>{t.preventDefault()})),t},s=(t,e,s,n)=>{n.addEventListener("click",(n=>{n.target.id===`delete-btn-${s}`&&(t[s].exists=!1,i(e,t))}))},n=(t,e,s,n)=>{n.addEventListener("click",(n=>{if(n.target.id===`edit-btn-${s}`){const n=document.querySelector(`#edit-task-name-${s}`).value,r=document.querySelector(`#edit-task-description-${s}`).value,o=document.querySelector(`#edit-task-date-${s}`).value,l=document.querySelector(`#edit-task-priority-${s}`).value;if(""===n)return;if(""===r)return;if(""===o)return;if(""===l)return;t[s].title=n,t[s].description=r,t[s].dueDate=o,t[s].priority=l,i(e,t)}}))},i=(t,i)=>{const o=document.querySelector("#tasks-list");o.innerHTML="";const l=i.filter((e=>e.project===t&&!0===e.exists));for(let i=0;i<l.length;i+=1){const a=r.getColor(l,i);o.innerHTML+=`\n            <li>\n                <p>\n                    <button class="btn btn-${a} w-100" type="button" data-bs-toggle="collapse" data-bs-target="#task-${i}" aria-expanded="false" aria-controls="task-${i}">\n                        ${l[i].title}\n                    </button>\n                </p>\n                    \n                <div class="collapse" id="task-${i}">\n                    <div class="card card-body bg-${a} mb-4">\n                        <ul class="list-group ">\n                            <li class="list-group-item bg-${a} text-white"><span class="fw-bold">Description</span>: ${l[i].description}</li>\n                            <li class="list-group-item bg-${a} text-white"><span class="fw-bold">Due Date</span>: ${l[i].dueDate}</li>\n                            <li class="list-group-item bg-${a} text-white"><span class="fw-bold">Priority</span>: ${l[i].priority}</li>\n                        </ul>\n                    \n                        <div class="d-flex mt-3 justify-content-between">\n                            <div>\n                                <p>\n                                    <button class="btn btn-${r.buttonColor(a)[0]}" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample-${i}" aria-expanded="false" aria-controls="collapseExample-${i}">\n                                        Edit\n                                    </button>\n\n                                    <button id="delete-btn-${i}" type="button" class="btn btn-${r.buttonColor(a)[1]}">Delete</button>\n                                </p>\n\n                                <div class="collapse multi-collapse" id="collapseExample-${i}">\n                                    <form id="edit-tasks-form">\n                                        <div class="mb-3">\n                                            <label for="edit-task-name" class="form-label text-info">Task Title</label>\n                                            <input type="text" class="form-control" id="edit-task-name-${i}">\n                                        </div>\n                        \n                                        <div class="mb-3">\n                                            <label for="edit-task-description" class="form-label text-info">Task Description</label>\n                                            <input type="text" class="form-control" id="edit-task-description-${i}">\n                                        </div>\n                        \n                                        <div class="mb-3">\n                                            <label for="edit-task-date" class="form-label text-info">Due Date</label>\n                                            <br>\n                                            <input type="date" id="edit-task-date-${i}" name="trip-start">\n                                        </div>\n                        \n                                        <div class="mb-3">\n                                            <label for="edit-task-priority" class="form-label text-info">Priority</label>\n                                            <select id="edit-task-priority-${i}" class="form-select" aria-label="Default select example">\n                                                <option selected>Select Priority</option>\n                                                <option value="low">Low</option>\n                                                <option value="medium">Medium</option>\n                                                <option value="high">High</option>\n                                            </select>\n                                        </div>\n                                        <div>\n                                            <button id="edit-btn-${i}" type="submit" class="btn btn-secondary">Edit Task</button>\n                                        </div\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </li>\n            `,document.querySelector(`#edit-task-name-${i}`).setAttribute("value",l[i].title),document.querySelector(`#edit-task-description-${i}`).setAttribute("value",l[i].description),document.querySelector(`#edit-task-date-${i}`).setAttribute("value",l[i].dueDate),document.querySelector(`#edit-task-priority-${i}`).setAttribute("value",l[i].priority),s(l,t,i,o,e.renderTask),n(l,t,i,o,e.renderTask)}};return{createNewTask:e=>{const s=t();document.querySelector("#task-btn").addEventListener("click",(()=>{const n=s.querySelector("#task-name").value,o=s.querySelector("#task-description").value,l=s.querySelector("#task-date").value,a=s.querySelector("#task-priority").value,c=s.querySelector("#task-project").value;""!==n&&""!==o&&""!==l&&""!==a&&(r.newTask(e,n,o,l,a,c),localStorage.setItem("tasks",JSON.stringify(e)),t(),i(c,e),document.querySelector("#tasks-form").reset())}))},renderTask:i}})(),s=(()=>{const t=()=>{const t=document.forms["project-form"];return t.addEventListener("submit",(t=>{t.preventDefault()})),t},s=t=>{const e=document.querySelector("#project-list");e.innerHTML='\n            <li class="list-group-item list-group-item-dark btn my-1" id="all-projects">All Projects</li>\n        ';for(let s=0;s<t.length;s+=1)e.innerHTML+=`\n                <li class="list-group-item list-group-item-dark btn my-1" id="project-list">${t[s].title}</li>\n            `};return{addProject:e=>{document.querySelector("#project-btn").addEventListener("click",(()=>{t(),((t,e)=>{const s=e().querySelector("#project-title").value;""!==s&&(o.newProject(s,t),localStorage.setItem("projects",JSON.stringify(t)))})(e,t),s(e),document.querySelector("#project-form").reset()}))},displayProjectTasks:(t,s)=>{const n=document.querySelector("#project-list");n.addEventListener("click",(s=>{const i=s.target.textContent;((t,e)=>{const s=t.target;[...e.children].forEach((t=>{t.classList.remove("active")})),s.classList.add("active"),document.querySelector("#task-display").classList.remove("d-none")})(s,n),(t=>{const e=document.querySelector("#project");e.innerHTML="",e.innerHTML+=`\n        <input type="hidden" value="${t}" id="task-project" class="form-control" aria-label="Default select example">\n    `})(i),((t,s)=>{const n=document.querySelector("#tasks-list");n.innerHTML="";const i=s.filter((t=>!0===t.exists)),o=document.querySelector("#add-task"),l=document.querySelector("#multiCollapseExample2");if("All Projects"===t){o.classList.add("d-none"),l.classList.add("d-none");for(let t=0;t<i.length;t+=1){const e=r.getColor(i,t);n.innerHTML+=`\n                    <li class="">\n                        <p>\n                            <button class="btn btn-${e} w-100" type="button" data-bs-toggle="collapse" data-bs-target="#task-${t}" aria-expanded="false" aria-controls="task-${t}">\n                                ${i[t].title}\n                            </button>\n                        </p>\n                        \n                        <div class="collapse" id="task-${t}">\n                            <div class="card card-body bg-${e} mb-4">\n                                <ul class="list-group">\n                                    <li class="list-group-item bg-${e} text-white"><span class="fw-bold">Description</span>: ${i[t].description}</li>\n                                    <li class="list-group-item bg-${e} text-white"><span class="fw-bold">Due Date</span>: ${i[t].dueDate}</li>\n                                    <li class="list-group-item bg-${e} text-white"><span class="fw-bold">Priority</span>: ${i[t].priority}</li>\n                                </ul>\n                            </div>\n                        </div>\n                    </li>\n                `}}else o.classList.remove("d-none"),l.classList.remove("d-none"),e.renderTask(t,s)})(i,t)}))},renderProjectView:s}})();let n=JSON.parse(localStorage.getItem("projects"))||[];const i=JSON.parse(localStorage.getItem("tasks"))||[];class r{constructor(t,e,s,n,i="default"){this.title=t,this.description=e,this.dueDate=s,this.priority=n,this.project=i,this.exists=!0}static newTask(t,e,s,n,i,o){const l=new r(e,s,n,i,o);t.push(l)}static getColor(t,e){let s;return s="low"===t[e].priority?"success":"medium"===t[e].priority?"info":"danger",s}static buttonColor(t){let e,s;return"success"!==t&&"info"!==t||(e="warning",s="danger"),"danger"===t&&(e="primary",s="warning"),[e,s]}}class o{constructor(t){this.title=t}static newProject(t,e){const s=new o(t);e.push(s)}}s.renderProjectView(n),s.addProject(n),s.displayProjectTasks(i),e.createNewTask(i,r),console.log(n)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qcy10b2RvbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9qcy10b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vanMtdG9kb2xpc3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9qcy10b2RvbGlzdC8uL3NyYy90YXNrRG9tLmpzIiwid2VicGFjazovL2pzLXRvZG9saXN0Ly4vc3JjL3Byb2plY3REb20uanMiLCJ3ZWJwYWNrOi8vanMtdG9kb2xpc3QvLi9zcmMvbWFpbi5qcyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInRhc2tDcmVhdGlvbiIsInRhc2tGb3JtIiwiVEFTS1NfRk9STSIsImRvY3VtZW50IiwiZm9ybXMiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZGVsZXRlVGFzayIsInByb2plY3RUYXNrcyIsInRhc2tQcm9qZWN0IiwiaSIsIlRBU0tTX0xJU1QiLCJ0YXJnZXQiLCJpZCIsImV4aXN0cyIsInJlbmRlclRhc2siLCJlZGl0VGFzayIsIkVESVRfTkFNRSIsInF1ZXJ5U2VsZWN0b3IiLCJ2YWx1ZSIsIkVESVRfREVTQyIsIkVESVRfREFURSIsIkVESVRfUFJJT1IiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwidGFza3NBcnIiLCJpbm5lckhUTUwiLCJmaWx0ZXIiLCJ0YXNrIiwicHJvamVjdCIsImxlbmd0aCIsImNvbG9yIiwiVGFzayIsImdldENvbG9yIiwiYnV0dG9uQ29sb3IiLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVOZXdUYXNrIiwiVEFTS19OQU1FIiwiVEFTS19ERVNDUklQVElPTiIsIlRBU0tfREFURSIsIlRBU0tfUFJJT1JJVFkiLCJUQVNLX1BST0pFQ1QiLCJuZXdUYXNrIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNldCIsInByb2plY3RDcmVhdGlvbiIsInByb2plY3RGb3JtIiwiUFJPSkVDVF9GT1JNIiwicmVuZGVyUHJvamVjdFZpZXciLCJwcm9qZWN0QXJyIiwiUFJPSkVDVF9MSVNUIiwiYWRkUHJvamVjdCIsIlBST0pFQ1RfVElUTEUiLCJQcm9qZWN0IiwibmV3UHJvamVjdCIsImNyZWF0ZVByb2plY3QiLCJkaXNwbGF5UHJvamVjdFRhc2tzIiwiUFJPSkVDVF9OQU1FIiwidGV4dENvbnRlbnQiLCJldmVudCIsInByb2plY3RMaXN0IiwiUFJPSkVDVCIsImNoaWxkcmVuIiwiZm9yRWFjaCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInByb2plY3RTZWxlY3Rpb24iLCJwcm9qZWN0TmFtZSIsInRhc2tPcHRpb25zIiwiVEFTS19MSVNUIiwiYWxsVGFza3MiLCJBRERfVEFTS19CVE4iLCJGT1JNIiwicmVuZGVyVGFza3MiLCJwcm9qZWN0cyIsInBhcnNlIiwiZ2V0SXRlbSIsInRhc2tzIiwidGhpcyIsIm5hbWUiLCJkYXRlIiwicHVzaCIsImFyciIsImJ0bkVkaXQiLCJidG5EZWxldGUiLCJwcm9qZWN0VGl0bGUiLCJORVdfUFJPSkVDVCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJtQkFDQSxJQUFJQSxFQUFzQixDQ0ExQixFQUF3QixDQUFDQyxFQUFTQyxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hGLEVBQW9CSSxFQUFFRixFQUFZQyxLQUFTSCxFQUFvQkksRUFBRUgsRUFBU0UsSUFDNUVFLE9BQU9DLGVBQWVMLEVBQVNFLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRSxFQUF3QixDQUFDTSxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxJLDBCQ0czRSxNQUFNSSxFQUFlLE1BRTFCLE1BQU1DLEVBQVcsS0FFZixNQUFNQyxFQUFhQyxTQUFTQyxNQUFNLGNBT2xDLE9BSkFGLEVBQVdHLGlCQUFpQixVQUFXQyxJQUNyQ0EsRUFBRUMsb0JBR0dMLEdBSUhNLEVBQWEsQ0FBQ0MsRUFBY0MsRUFBYUMsRUFBR0MsS0FDaERBLEVBQVdQLGlCQUFpQixTQUFVQyxJQUNoQ0EsRUFBRU8sT0FBT0MsS0FBTyxjQUFjSCxNQUNoQ0YsRUFBYUUsR0FBR0ksUUFBUyxFQUN6QkMsRUFBV04sRUFBYUQsUUFLeEJRLEVBQVcsQ0FBQ1IsRUFBY0MsRUFBYUMsRUFBR0MsS0FDOUNBLEVBQVdQLGlCQUFpQixTQUFVQyxJQUNwQyxHQUFJQSxFQUFFTyxPQUFPQyxLQUFPLFlBQVlILElBQUssQ0FDbkMsTUFBTU8sRUFBWWYsU0FBU2dCLGNBQWMsbUJBQW1CUixLQUFLUyxNQUMzREMsRUFBWWxCLFNBQVNnQixjQUFjLDBCQUEwQlIsS0FBS1MsTUFDbEVFLEVBQVluQixTQUFTZ0IsY0FBYyxtQkFBbUJSLEtBQUtTLE1BQzNERyxFQUFhcEIsU0FBU2dCLGNBQWMsdUJBQXVCUixLQUFLUyxNQUV0RSxHQUFrQixLQUFkRixFQUNGLE9BRUYsR0FBa0IsS0FBZEcsRUFDRixPQUVGLEdBQWtCLEtBQWRDLEVBQ0YsT0FFRixHQUFtQixLQUFmQyxFQUNGLE9BR0ZkLEVBQWFFLEdBQUdhLE1BQVFOLEVBQ3hCVCxFQUFhRSxHQUFHYyxZQUFjSixFQUM5QlosRUFBYUUsR0FBR2UsUUFBVUosRUFDMUJiLEVBQWFFLEdBQUdnQixTQUFXSixFQUUzQlAsRUFBV04sRUFBYUQsUUFNeEJPLEVBQWEsQ0FBQ04sRUFBYWtCLEtBQy9CLE1BQU1oQixFQUFhVCxTQUFTZ0IsY0FBYyxlQUUxQ1AsRUFBV2lCLFVBQVksR0FDdkIsTUFBTXBCLEVBQWVtQixFQUFTRSxRQUFPQyxHQUFRQSxFQUFLQyxVQUFZdEIsSUFDdkMsSUFBaEJxQixFQUFLaEIsU0FFWixJQUFLLElBQUlKLEVBQUksRUFBR0EsRUFBSUYsRUFBYXdCLE9BQVF0QixHQUFLLEVBQUcsQ0FDL0MsTUFBTXVCLEVBQVFDLEVBQUtDLFNBQVMzQixFQUFjRSxHQUUxQ0MsRUFBV2lCLFdBQWEsdUZBR2VLLDBFQUE4RXZCLGdEQUFnREEsZ0NBQ2pKRixFQUFhRSxHQUFHYSxvSUFJT2IsMERBQ0d1Qix5SEFFUUEsMkRBQStEekIsRUFBYUUsR0FBR2MsK0VBQy9FUyx3REFBNER6QixFQUFhRSxHQUFHZSwyRUFDNUVRLHdEQUE0RHpCLEVBQWFFLEdBQUdnQixxUkFNM0VRLEVBQUtFLFlBQVlILEdBQU8sZ0ZBQWdGdkIsMkRBQTJEQSxrS0FJbktBLG1DQUFtQ3dCLEVBQUtFLFlBQVlILEdBQU8seUpBRzdCdkIscVdBSWNBLGtZQUtPQSx5WUFNNUJBLHNXQUtQQSxnbkJBUVZBLDZWQVc3RFIsU0FBU2dCLGNBQWMsbUJBQW1CUixLQUFLMkIsYUFBYSxRQUFTN0IsRUFBYUUsR0FBR2EsT0FDckZyQixTQUFTZ0IsY0FBYywwQkFBMEJSLEtBQUsyQixhQUFhLFFBQVM3QixFQUFhRSxHQUFHYyxhQUM1RnRCLFNBQVNnQixjQUFjLG1CQUFtQlIsS0FBSzJCLGFBQWEsUUFBUzdCLEVBQWFFLEdBQUdlLFNBQ3JGdkIsU0FBU2dCLGNBQWMsdUJBQXVCUixLQUMzQzJCLGFBQWEsUUFBUzdCLEVBQWFFLEdBQUdnQixVQUV6Q25CLEVBQVdDLEVBQ1RDLEVBQ0FDLEVBQ0FDLEVBQ0FaLEVBQWFnQixZQUVmQyxFQUFTUixFQUNQQyxFQUNBQyxFQUNBQyxFQUNBWixFQUFhZ0IsY0FpRG5CLE1BQU8sQ0FDTHVCLGNBN0NxQlgsSUFDckIsTUFBTTFCLEVBQWFELElBQ0ZFLFNBQVNnQixjQUFjLGFBQy9CZCxpQkFBaUIsU0FBUyxLQUNqQyxNQUFNbUMsRUFBWXRDLEVBQVdpQixjQUFjLGNBQWNDLE1BQ25EcUIsRUFBbUJ2QyxFQUN0QmlCLGNBQWMscUJBQ2RDLE1BQ0dzQixFQUFZeEMsRUFBV2lCLGNBQWMsY0FBY0MsTUFDbkR1QixFQUFnQnpDLEVBQVdpQixjQUFjLGtCQUFrQkMsTUFDM0R3QixFQUFlMUMsRUFBV2lCLGNBQWMsaUJBQWlCQyxNQUU3QyxLQUFkb0IsR0FHcUIsS0FBckJDLEdBR2MsS0FBZEMsR0FHa0IsS0FBbEJDLElBS0pSLEVBQUtVLFFBQVFqQixFQUNYWSxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxHQUVGRSxhQUFhQyxRQUFRLFFBQVNDLEtBQUtDLFVBQVVyQixJQUU3QzNCLElBR0FlLEVBQVc0QixFQUFjaEIsR0FFekJ6QixTQUFTZ0IsY0FBYyxlQUFlK0IsYUFLekJsQyxlQXJNUyxHQ0VmbUMsRUFBa0IsTUFDN0IsTUFBTUMsRUFBYyxLQUVsQixNQUFNQyxFQUFlbEQsU0FBU0MsTUFBTSxnQkFNcEMsT0FKQWlELEVBQWFoRCxpQkFBaUIsVUFBV0MsSUFDdkNBLEVBQUVDLG9CQUdHOEMsR0FlSEMsRUFBcUJDLElBQ3pCLE1BQU1DLEVBQWVyRCxTQUFTZ0IsY0FBYyxpQkFDNUNxQyxFQUFhM0IsVUFBWSx3SEFJekIsSUFBSyxJQUFJbEIsRUFBSSxFQUFHQSxFQUFJNEMsRUFBV3RCLE9BQVF0QixHQUFLLEVBQzFDNkMsRUFBYTNCLFdBQWEsaUdBQzhEMEIsRUFBVzVDLEdBQUdhLDRCQXVHMUcsTUFBTyxDQUNMaUMsV0FsQ2tCRixJQUNFcEQsU0FBU2dCLGNBQWMsZ0JBRS9CZCxpQkFBaUIsU0FBUyxLQUVwQytDLElBOUZrQixFQUFDRyxFQUFZSCxLQUNqQyxNQUFNTSxFQUFnQk4sSUFBY2pDLGNBQWMsa0JBQWtCQyxNQUM5QyxLQUFsQnNDLElBSUpDLEVBQVFDLFdBQVdGLEVBQWVILEdBRWxDVCxhQUFhQyxRQUFRLFdBQVlDLEtBQUtDLFVBQVVNLE1BeUY5Q00sQ0FBY04sRUFBWUgsR0FHMUJFLEVBQWtCQyxHQUdsQnBELFNBQVNnQixjQUFjLGlCQUFpQitCLFlBb0I5Qlksb0JBZmMsQ0FBQ2xDLEVBQVVRLEtBQ3JDLE1BQU1vQixFQUFlckQsU0FBU2dCLGNBQWMsaUJBRTVDcUMsRUFBYW5ELGlCQUFpQixTQUFVQyxJQUN0QyxNQUFNeUQsRUFBZXpELEVBQUVPLE9BQU9tRCxZQTlFVCxFQUFDQyxFQUFPQyxLQUMvQixNQUFNQyxFQUFVRixFQUFNcEQsT0FFTCxJQUFJcUQsRUFBWUUsVUFDeEJDLFNBQVNyQyxJQUNoQkEsRUFBUXNDLFVBQVVDLE9BQU8sYUFHM0JKLEVBQVFHLFVBQVVFLElBQUksVUFDRHJFLFNBQVNnQixjQUFjLGlCQUMvQm1ELFVBQVVDLE9BQU8sV0FzRTVCRSxDQUFpQm5FLEVBQUdrRCxHQXpGSixDQUFDa0IsSUFFbkIsTUFBTTlCLEVBQWV6QyxTQUFTZ0IsY0FBYyxZQUM1Q3lCLEVBQWFmLFVBQVksR0FDekJlLEVBQWFmLFdBQWEseUNBQ1E2Qyx3RkFzRmhDQyxDQUFZWixHQXJFSSxFQUFDVyxFQUFhOUMsS0FDaEMsTUFBTWdELEVBQVl6RSxTQUFTZ0IsY0FBYyxlQUN6Q3lELEVBQVUvQyxVQUFZLEdBQ3RCLE1BQU1nRCxFQUFXakQsRUFBU0UsUUFBT0MsSUFBd0IsSUFBaEJBLEVBQUtoQixTQUN4QytELEVBQWUzRSxTQUFTZ0IsY0FBYyxhQUN0QzRELEVBQU81RSxTQUFTZ0IsY0FBYywwQkFFcEMsR0FBb0IsaUJBQWhCdUQsRUFBZ0MsQ0FDbENJLEVBQWFSLFVBQVVFLElBQUksVUFDM0JPLEVBQUtULFVBQVVFLElBQUksVUFDbkIsSUFBSyxJQUFJN0QsRUFBSSxFQUFHQSxFQUFJa0UsRUFBUzVDLE9BQVF0QixHQUFLLEVBQUcsQ0FDM0MsTUFBTXVCLEVBQVFDLEVBQUtDLFNBQVN5QyxFQUFVbEUsR0FFdENpRSxFQUFVL0MsV0FBYSx3SEFHc0JLLDBFQUE4RXZCLGdEQUFnREEsd0NBQ2pKa0UsRUFBU2xFLEdBQUdhLGdLQUlXYixrRUFDR3VCLHdJQUVRQSwyREFBK0QyQyxFQUFTbEUsR0FBR2MsdUZBQzNFUyx3REFBNEQyQyxFQUFTbEUsR0FBR2UsbUZBQ3hFUSx3REFBNEQyQyxFQUFTbEUsR0FBR2dCLDhLQVF0SW1ELEVBQWFSLFVBQVVDLE9BQU8sVUFDOUJRLEVBQUtULFVBQVVDLE9BQU8sVUFDdEJ2RSxFQUFhZ0IsV0FBVzBELEVBQWE5QyxJQW1DckNvRCxDQUFZakIsRUFBY25DLE9BS0swQixzQkF4SU4sR0NEL0IsSUFBSTJCLEVBQVdqQyxLQUFLa0MsTUFBTXBDLGFBQWFxQyxRQUFRLGNBQWdCLEdBRS9ELE1BQU1DLEVBQVFwQyxLQUFLa0MsTUFBTXBDLGFBQWFxQyxRQUFRLFdBQWEsR0FJcEQsTUFBTWhELEVBQ1gsWUFBWVgsRUFBT0MsRUFBYUMsRUFBU0MsRUFBVUssRUFBVSxXQUMzRHFELEtBQUs3RCxNQUFRQSxFQUNiNkQsS0FBSzVELFlBQWNBLEVBQ25CNEQsS0FBSzNELFFBQVVBLEVBQ2YyRCxLQUFLMUQsU0FBV0EsRUFDaEIwRCxLQUFLckQsUUFBVUEsRUFDZnFELEtBQUt0RSxRQUFTLEVBSWhCLGVBQWVhLEVBQVUwRCxFQUFNN0QsRUFBYThELEVBQU01RCxFQUFVSyxHQUMxRCxNQUFNYSxFQUFVLElBQUlWLEVBQUttRCxFQUFNN0QsRUFBYThELEVBQU01RCxFQUFVSyxHQUM1REosRUFBUzRELEtBQUszQyxHQUloQixnQkFBZ0I0QyxFQUFLOUUsR0FDbkIsSUFBSXVCLEVBUUosT0FORUEsRUFEc0IsUUFBcEJ1RCxFQUFJOUUsR0FBR2dCLFNBQ0QsVUFDcUIsV0FBcEI4RCxFQUFJOUUsR0FBR2dCLFNBQ1IsT0FFQSxTQUVITyxFQUlULG1CQUFtQkEsR0FDakIsSUFBSXdELEVBQ0FDLEVBU0osTUFSYyxZQUFWekQsR0FBaUMsU0FBVkEsSUFDekJ3RCxFQUFVLFVBQ1ZDLEVBQVksVUFFQSxXQUFWekQsSUFDRndELEVBQVUsVUFDVkMsRUFBWSxXQUVQLENBQUNELEVBQVNDLElBSWQsTUFBTWhDLEVBQ1gsWUFBWW5DLEdBQ1Y2RCxLQUFLN0QsTUFBUUEsRUFHZixrQkFBa0JvRSxFQUFjckMsR0FDOUIsTUFBTXNDLEVBQWMsSUFBSWxDLEVBQVFpQyxHQUNoQ3JDLEVBQVdpQyxLQUFLSyxJQUtwQjFDLEVBQWdCRyxrQkFBa0IyQixHQUNsQzlCLEVBQWdCTSxXQUFXd0IsR0FDM0I5QixFQUFnQlcsb0JBQW9Cc0IsR0FHcENwRixFQUFhdUMsY0FBYzZDLEVBQU9qRCxHQUdsQzJELFFBQVFDLElBQUlkLEkiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgVGFzayB9IGZyb20gXCIuL21haW5cIjtcclxuXHJcbi8vIFRhc2sgQ3JlYXRpb24gTW9kdWxlIChJSUZFKTtcclxuZXhwb3J0IGNvbnN0IHRhc2tDcmVhdGlvbiA9ICgoKSA9PiB7XHJcbiAgLy8gVGFzayBGb3JtXHJcbiAgY29uc3QgdGFza0Zvcm0gPSAoKSA9PiB7XHJcbiAgICAvLyBUYXNrcyBGb3JtIEluZm9ybWF0aW9uXHJcbiAgICBjb25zdCBUQVNLU19GT1JNID0gZG9jdW1lbnQuZm9ybXNbJ3Rhc2tzLWZvcm0nXTtcclxuXHJcbi8vIHByZXZlbnQgZm9ybSBkZWZhdWx0IGJlaGF2aW91clxyXG4gICAgVEFTS1NfRk9STS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gVEFTS1NfRk9STTtcclxuICB9XHJcblxyXG4gIC8vIEVkaXQvRGVsZXRlIFRhc2tzIG1ldGhvZHNcclxuICBjb25zdCBkZWxldGVUYXNrID0gKHByb2plY3RUYXNrcywgdGFza1Byb2plY3QsIGksIFRBU0tTX0xJU1QpID0+IHtcclxuICAgIFRBU0tTX0xJU1QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQuaWQgPT09IGBkZWxldGUtYnRuLSR7aX1gKSB7XHJcbiAgICAgICAgcHJvamVjdFRhc2tzW2ldLmV4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgIHJlbmRlclRhc2sodGFza1Byb2plY3QsIHByb2plY3RUYXNrcyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZWRpdFRhc2sgPSAocHJvamVjdFRhc2tzLCB0YXNrUHJvamVjdCwgaSwgVEFTS1NfTElTVCkgPT57XHJcbiAgICBUQVNLU19MSVNULmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0LmlkID09PSBgZWRpdC1idG4tJHtpfWApIHtcclxuICAgICAgICBjb25zdCBFRElUX05BTUUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZWRpdC10YXNrLW5hbWUtJHtpfWApLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IEVESVRfREVTQyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNlZGl0LXRhc2stZGVzY3JpcHRpb24tJHtpfWApLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IEVESVRfREFURSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNlZGl0LXRhc2stZGF0ZS0ke2l9YCkudmFsdWU7XHJcbiAgICAgICAgY29uc3QgRURJVF9QUklPUiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNlZGl0LXRhc2stcHJpb3JpdHktJHtpfWApLnZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoRURJVF9OQU1FID09PSAnJykge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoRURJVF9ERVNDID09PSAnJykge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoRURJVF9EQVRFID09PSAnJykge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoRURJVF9QUklPUiA9PT0gJycpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb2plY3RUYXNrc1tpXS50aXRsZSA9IEVESVRfTkFNRTtcclxuICAgICAgICBwcm9qZWN0VGFza3NbaV0uZGVzY3JpcHRpb24gPSBFRElUX0RFU0M7XHJcbiAgICAgICAgcHJvamVjdFRhc2tzW2ldLmR1ZURhdGUgPSBFRElUX0RBVEU7XHJcbiAgICAgICAgcHJvamVjdFRhc2tzW2ldLnByaW9yaXR5ID0gRURJVF9QUklPUjtcclxuXHJcbiAgICAgICAgcmVuZGVyVGFzayh0YXNrUHJvamVjdCwgcHJvamVjdFRhc2tzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyByZW5kZXIgdGFza3MgaW4gdGhlIFVJXHJcbiAgY29uc3QgcmVuZGVyVGFzayA9ICh0YXNrUHJvamVjdCwgdGFza3NBcnIpID0+IHtcclxuICAgIGNvbnN0IFRBU0tTX0xJU1QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFza3MtbGlzdCcpO1xyXG5cclxuICAgIFRBU0tTX0xJU1QuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBjb25zdCBwcm9qZWN0VGFza3MgPSB0YXNrc0Fyci5maWx0ZXIodGFzayA9PiB0YXNrLnByb2plY3QgPT09IHRhc2tQcm9qZWN0XHJcbiAgICAgICAgJiYgdGFzay5leGlzdHMgPT09IHRydWUpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdFRhc2tzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgIGNvbnN0IGNvbG9yID0gVGFzay5nZXRDb2xvcihwcm9qZWN0VGFza3MsIGkpO1xyXG4gICAgICAvKiBlc2xpbnQgbWF4LWxlbjogW1wiZXJyb3JcIiwgeyBcImlnbm9yZVRlbXBsYXRlTGl0ZXJhbHNcIjogdHJ1ZSB9XSAqL1xyXG4gICAgICBUQVNLU19MSVNULmlubmVySFRNTCArPSBgXHJcbiAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLSR7Y29sb3J9IHctMTAwXCIgdHlwZT1cImJ1dHRvblwiIGRhdGEtYnMtdG9nZ2xlPVwiY29sbGFwc2VcIiBkYXRhLWJzLXRhcmdldD1cIiN0YXNrLSR7aX1cIiBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIiBhcmlhLWNvbnRyb2xzPVwidGFzay0ke2l9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7cHJvamVjdFRhc2tzW2ldLnRpdGxlfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbGxhcHNlXCIgaWQ9XCJ0YXNrLSR7aX1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZCBjYXJkLWJvZHkgYmctJHtjb2xvcn0gbWItNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0LWdyb3VwIFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGJnLSR7Y29sb3J9IHRleHQtd2hpdGVcIj48c3BhbiBjbGFzcz1cImZ3LWJvbGRcIj5EZXNjcmlwdGlvbjwvc3Bhbj46ICR7cHJvamVjdFRhc2tzW2ldLmRlc2NyaXB0aW9ufTwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gYmctJHtjb2xvcn0gdGV4dC13aGl0ZVwiPjxzcGFuIGNsYXNzPVwiZnctYm9sZFwiPkR1ZSBEYXRlPC9zcGFuPjogJHtwcm9qZWN0VGFza3NbaV0uZHVlRGF0ZX08L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGJnLSR7Y29sb3J9IHRleHQtd2hpdGVcIj48c3BhbiBjbGFzcz1cImZ3LWJvbGRcIj5Qcmlvcml0eTwvc3Bhbj46ICR7cHJvamVjdFRhc2tzW2ldLnByaW9yaXR5fTwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggbXQtMyBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tJHtUYXNrLmJ1dHRvbkNvbG9yKGNvbG9yKVswXX1cIiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1icy10b2dnbGU9XCJjb2xsYXBzZVwiIGRhdGEtYnMtdGFyZ2V0PVwiI2NvbGxhcHNlRXhhbXBsZS0ke2l9XCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCIgYXJpYS1jb250cm9scz1cImNvbGxhcHNlRXhhbXBsZS0ke2l9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFZGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImRlbGV0ZS1idG4tJHtpfVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tJHtUYXNrLmJ1dHRvbkNvbG9yKGNvbG9yKVsxXX1cIj5EZWxldGU8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2xsYXBzZSBtdWx0aS1jb2xsYXBzZVwiIGlkPVwiY29sbGFwc2VFeGFtcGxlLSR7aX1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gaWQ9XCJlZGl0LXRhc2tzLWZvcm1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImVkaXQtdGFzay1uYW1lXCIgY2xhc3M9XCJmb3JtLWxhYmVsIHRleHQtaW5mb1wiPlRhc2sgVGl0bGU8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJlZGl0LXRhc2stbmFtZS0ke2l9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJlZGl0LXRhc2stZGVzY3JpcHRpb25cIiBjbGFzcz1cImZvcm0tbGFiZWwgdGV4dC1pbmZvXCI+VGFzayBEZXNjcmlwdGlvbjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImVkaXQtdGFzay1kZXNjcmlwdGlvbi0ke2l9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJlZGl0LXRhc2stZGF0ZVwiIGNsYXNzPVwiZm9ybS1sYWJlbCB0ZXh0LWluZm9cIj5EdWUgRGF0ZTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwiZWRpdC10YXNrLWRhdGUtJHtpfVwiIG5hbWU9XCJ0cmlwLXN0YXJ0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJlZGl0LXRhc2stcHJpb3JpdHlcIiBjbGFzcz1cImZvcm0tbGFiZWwgdGV4dC1pbmZvXCI+UHJpb3JpdHk8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJlZGl0LXRhc2stcHJpb3JpdHktJHtpfVwiIGNsYXNzPVwiZm9ybS1zZWxlY3RcIiBhcmlhLWxhYmVsPVwiRGVmYXVsdCBzZWxlY3QgZXhhbXBsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHNlbGVjdGVkPlNlbGVjdCBQcmlvcml0eTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibG93XCI+TG93PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJtZWRpdW1cIj5NZWRpdW08L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImhpZ2hcIj5IaWdoPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImVkaXQtYnRuLSR7aX1cIiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiPkVkaXQgVGFzazwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZWRpdC10YXNrLW5hbWUtJHtpfWApLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBwcm9qZWN0VGFza3NbaV0udGl0bGUpO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZWRpdC10YXNrLWRlc2NyaXB0aW9uLSR7aX1gKS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcHJvamVjdFRhc2tzW2ldLmRlc2NyaXB0aW9uKTtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2VkaXQtdGFzay1kYXRlLSR7aX1gKS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcHJvamVjdFRhc2tzW2ldLmR1ZURhdGUpO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZWRpdC10YXNrLXByaW9yaXR5LSR7aX1gKVxyXG4gICAgICAgIC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcHJvamVjdFRhc2tzW2ldLnByaW9yaXR5KTtcclxuXHJcbiAgICAgIGRlbGV0ZVRhc2socHJvamVjdFRhc2tzLFxyXG4gICAgICAgIHRhc2tQcm9qZWN0LFxyXG4gICAgICAgIGksXHJcbiAgICAgICAgVEFTS1NfTElTVCxcclxuICAgICAgICB0YXNrQ3JlYXRpb24ucmVuZGVyVGFzayk7XHJcblxyXG4gICAgICBlZGl0VGFzayhwcm9qZWN0VGFza3MsXHJcbiAgICAgICAgdGFza1Byb2plY3QsXHJcbiAgICAgICAgaSxcclxuICAgICAgICBUQVNLU19MSVNULFxyXG4gICAgICAgIHRhc2tDcmVhdGlvbi5yZW5kZXJUYXNrKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBjcmVhdGUgdGFzayBhbmQgZGlzcGxheSBpdCBvbiB0aGUgVUlcclxuICBjb25zdCBjcmVhdGVOZXdUYXNrID0gKHRhc2tzQXJyKSA9PiB7XHJcbiAgICBjb25zdCBUQVNLU19GT1JNID0gdGFza0Zvcm0oKTtcclxuICAgIGNvbnN0IFRBU0tfQlROID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stYnRuJyk7XHJcbiAgICBUQVNLX0JUTi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgY29uc3QgVEFTS19OQU1FID0gVEFTS1NfRk9STS5xdWVyeVNlbGVjdG9yKCcjdGFzay1uYW1lJykudmFsdWU7XHJcbiAgICAgIGNvbnN0IFRBU0tfREVTQ1JJUFRJT04gPSBUQVNLU19GT1JNXHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJyN0YXNrLWRlc2NyaXB0aW9uJylcclxuICAgICAgICAudmFsdWU7XHJcbiAgICAgIGNvbnN0IFRBU0tfREFURSA9IFRBU0tTX0ZPUk0ucXVlcnlTZWxlY3RvcignI3Rhc2stZGF0ZScpLnZhbHVlO1xyXG4gICAgICBjb25zdCBUQVNLX1BSSU9SSVRZID0gVEFTS1NfRk9STS5xdWVyeVNlbGVjdG9yKCcjdGFzay1wcmlvcml0eScpLnZhbHVlO1xyXG4gICAgICBjb25zdCBUQVNLX1BST0pFQ1QgPSBUQVNLU19GT1JNLnF1ZXJ5U2VsZWN0b3IoJyN0YXNrLXByb2plY3QnKS52YWx1ZTtcclxuXHJcbiAgICAgIGlmIChUQVNLX05BTUUgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChUQVNLX0RFU0NSSVBUSU9OID09PSAnJykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoVEFTS19EQVRFID09PSAnJykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoVEFTS19QUklPUklUWSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBuZXcgdGFzayBpbnN0YW5jZVxyXG4gICAgICBUYXNrLm5ld1Rhc2sodGFza3NBcnIsXHJcbiAgICAgICAgVEFTS19OQU1FLFxyXG4gICAgICAgIFRBU0tfREVTQ1JJUFRJT04sXHJcbiAgICAgICAgVEFTS19EQVRFLFxyXG4gICAgICAgIFRBU0tfUFJJT1JJVFksXHJcbiAgICAgICAgVEFTS19QUk9KRUNUKTtcclxuXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzQXJyKSk7XHJcblxyXG4gICAgICB0YXNrRm9ybSgpO1xyXG5cclxuICAgICAgLy8gcmVuZGVyIHRhc2sgdG8gdGhlIFVJXHJcbiAgICAgIHJlbmRlclRhc2soVEFTS19QUk9KRUNULCB0YXNrc0Fycik7XHJcblxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFza3MtZm9ybScpLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgY3JlYXRlTmV3VGFzaywgcmVuZGVyVGFzayxcclxuICB9O1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgeyB0YXNrQ3JlYXRpb24gfTsiLCJpbXBvcnQgeyBUYXNrIH0gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyB0YXNrQ3JlYXRpb24gfSBmcm9tIFwiLi90YXNrRG9tXCI7XHJcblxyXG4vLyBQcm9qZWN0IENyZWF0aW9uIE1vZHVsZSAoSUlGRSk7XHJcbmV4cG9ydCBjb25zdCBwcm9qZWN0Q3JlYXRpb24gPSAoKCkgPT4ge1xyXG4gIGNvbnN0IHByb2plY3RGb3JtID0gKCkgPT4ge1xyXG4gICAgLy8gcHJldmVudCBmb3JtIGRlZmF1bHQgYmVoYXZpb3VyXHJcbiAgICBjb25zdCBQUk9KRUNUX0ZPUk0gPSBkb2N1bWVudC5mb3Jtc1sncHJvamVjdC1mb3JtJ107XHJcblxyXG4gICAgUFJPSkVDVF9GT1JNLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBQUk9KRUNUX0ZPUk07XHJcbiAgfVxyXG5cclxuICAvLyBQcm9qZWN0IEhlbHBlciBtZXRob2RzXHJcbiAgY29uc3QgY3JlYXRlUHJvamVjdCA9IChwcm9qZWN0QXJyLCBwcm9qZWN0Rm9ybSkgPT4ge1xyXG4gICAgY29uc3QgUFJPSkVDVF9USVRMRSA9IHByb2plY3RGb3JtKCkucXVlcnlTZWxlY3RvcignI3Byb2plY3QtdGl0bGUnKS52YWx1ZTtcclxuICAgIGlmIChQUk9KRUNUX1RJVExFID09PSAnJykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgUHJvamVjdC5uZXdQcm9qZWN0KFBST0pFQ1RfVElUTEUsIHByb2plY3RBcnIpO1xyXG5cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KHByb2plY3RBcnIpKTtcclxuICB9O1xyXG5cclxuICBjb25zdCByZW5kZXJQcm9qZWN0VmlldyA9IChwcm9qZWN0QXJyKSA9PiB7XHJcbiAgICBjb25zdCBQUk9KRUNUX0xJU1QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1saXN0Jyk7XHJcbiAgICBQUk9KRUNUX0xJU1QuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gbGlzdC1ncm91cC1pdGVtLWRhcmsgYnRuIG15LTFcIiBpZD1cImFsbC1wcm9qZWN0c1wiPkFsbCBQcm9qZWN0czwvbGk+XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2plY3RBcnIubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgUFJPSkVDVF9MSVNULmlubmVySFRNTCArPSBgXHJcbiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gbGlzdC1ncm91cC1pdGVtLWRhcmsgYnRuIG15LTFcIiBpZD1cInByb2plY3QtbGlzdFwiPiR7cHJvamVjdEFycltpXS50aXRsZX08L2xpPlxyXG4gICAgICAgICAgICBgO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFByb2plY3QncyB0YXNrcyBIZWxwZXIgTWV0aG9kXHJcbiAgY29uc3QgdGFza09wdGlvbnMgPSAocHJvamVjdE5hbWUpID0+IHtcclxuICAgIC8vIENyZWF0ZSBzZWxlY3Rpb24gb24gdGFza3MgYmFzZWQgb24gb2JqZWN0c1xyXG4gICAgY29uc3QgVEFTS19QUk9KRUNUID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QnKTtcclxuICAgIFRBU0tfUFJPSkVDVC5pbm5lckhUTUwgPSAnJztcclxuICAgIFRBU0tfUFJPSkVDVC5pbm5lckhUTUwgKz0gYFxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgdmFsdWU9XCIke3Byb2plY3ROYW1lfVwiIGlkPVwidGFzay1wcm9qZWN0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBhcmlhLWxhYmVsPVwiRGVmYXVsdCBzZWxlY3QgZXhhbXBsZVwiPlxyXG4gICAgYDtcclxuICB9O1xyXG5cclxuICBjb25zdCBwcm9qZWN0U2VsZWN0aW9uID0gKGV2ZW50LCBwcm9qZWN0TGlzdCkgPT4ge1xyXG4gICAgY29uc3QgUFJPSkVDVCA9IGV2ZW50LnRhcmdldDtcclxuXHJcbiAgICBjb25zdCBjaGlsZHJlbiA9IFsuLi5wcm9qZWN0TGlzdC5jaGlsZHJlbl07XHJcbiAgICBjaGlsZHJlbi5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XHJcbiAgICAgIHByb2plY3QuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBQUk9KRUNULmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgY29uc3QgVEFTS19ESVNQTEFZID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stZGlzcGxheScpO1xyXG4gICAgVEFTS19ESVNQTEFZLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlbmRlclRhc2tzID0gKHByb2plY3ROYW1lLCB0YXNrc0FycikgPT4ge1xyXG4gICAgY29uc3QgVEFTS19MSVNUID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2tzLWxpc3QnKTtcclxuICAgIFRBU0tfTElTVC5pbm5lckhUTUwgPSAnJztcclxuICAgIGNvbnN0IGFsbFRhc2tzID0gdGFza3NBcnIuZmlsdGVyKHRhc2sgPT4gdGFzay5leGlzdHMgPT09IHRydWUpO1xyXG4gICAgY29uc3QgQUREX1RBU0tfQlROID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC10YXNrJyk7XHJcbiAgICBjb25zdCBGT1JNID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI211bHRpQ29sbGFwc2VFeGFtcGxlMicpO1xyXG5cclxuICAgIGlmIChwcm9qZWN0TmFtZSA9PT0gJ0FsbCBQcm9qZWN0cycpIHtcclxuICAgICAgQUREX1RBU0tfQlROLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG4gICAgICBGT1JNLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFRhc2tzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgY29uc3QgY29sb3IgPSBUYXNrLmdldENvbG9yKGFsbFRhc2tzLCBpKTtcclxuICAgICAgICAvKiBlc2xpbnQgbWF4LWxlbjogW1wiZXJyb3JcIiwgeyBcImlnbm9yZVRlbXBsYXRlTGl0ZXJhbHNcIjogdHJ1ZSB9XSAqL1xyXG4gICAgICAgIFRBU0tfTElTVC5pbm5lckhUTUwgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cIlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLSR7Y29sb3J9IHctMTAwXCIgdHlwZT1cImJ1dHRvblwiIGRhdGEtYnMtdG9nZ2xlPVwiY29sbGFwc2VcIiBkYXRhLWJzLXRhcmdldD1cIiN0YXNrLSR7aX1cIiBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIiBhcmlhLWNvbnRyb2xzPVwidGFzay0ke2l9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHthbGxUYXNrc1tpXS50aXRsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sbGFwc2VcIiBpZD1cInRhc2stJHtpfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQgY2FyZC1ib2R5IGJnLSR7Y29sb3J9IG1iLTRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0LWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBiZy0ke2NvbG9yfSB0ZXh0LXdoaXRlXCI+PHNwYW4gY2xhc3M9XCJmdy1ib2xkXCI+RGVzY3JpcHRpb248L3NwYW4+OiAke2FsbFRhc2tzW2ldLmRlc2NyaXB0aW9ufTwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBiZy0ke2NvbG9yfSB0ZXh0LXdoaXRlXCI+PHNwYW4gY2xhc3M9XCJmdy1ib2xkXCI+RHVlIERhdGU8L3NwYW4+OiAke2FsbFRhc2tzW2ldLmR1ZURhdGV9PC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGJnLSR7Y29sb3J9IHRleHQtd2hpdGVcIj48c3BhbiBjbGFzcz1cImZ3LWJvbGRcIj5Qcmlvcml0eTwvc3Bhbj46ICR7YWxsVGFza3NbaV0ucHJpb3JpdHl9PC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBBRERfVEFTS19CVE4uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbiAgICAgIEZPUk0uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbiAgICAgIHRhc2tDcmVhdGlvbi5yZW5kZXJUYXNrKHByb2plY3ROYW1lLCB0YXNrc0Fycik7XHJcbiAgICB9XHJcblxyXG4gIH07XHJcblxyXG4gIC8vIENyZWF0ZSBhbmQgZGlzcGxheSBwcm9qZWN0IGluIHRoZSBVSVxyXG4gIGNvbnN0IGFkZFByb2plY3QgPSAocHJvamVjdEFycikgPT4ge1xyXG4gICAgY29uc3QgUFJPSkVDVF9CVE4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1idG4nKTtcclxuXHJcbiAgICBQUk9KRUNUX0JUTi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgLy9QcmV2ZW50IGRlZmF1bHRcclxuICAgICAgcHJvamVjdEZvcm0oKTtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBuZXcgcHJvamVjdFxyXG4gICAgICBjcmVhdGVQcm9qZWN0KHByb2plY3RBcnIsIHByb2plY3RGb3JtKTtcclxuXHJcbiAgICAgIC8vIFJlbmRlciBwcm9qZWN0cyBpbiB2aWV3c1xyXG4gICAgICByZW5kZXJQcm9qZWN0Vmlldyhwcm9qZWN0QXJyKTtcclxuXHJcbiAgICAgIC8vIHJlc2V0IHByb2plY3QgZm9ybVxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1mb3JtJykucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vIERpc3BsYXkgdGhlIHByb2plY3QncyBzcGVjaWZpYyB0YXNrcyBpbiB0aGUgVUlcclxuICBjb25zdCBkaXNwbGF5UHJvamVjdFRhc2tzID0gKHRhc2tzQXJyLCBnZXRDb2xvcikgPT4ge1xyXG4gICAgY29uc3QgUFJPSkVDVF9MSVNUID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QtbGlzdCcpO1xyXG5cclxuICAgIFBST0pFQ1RfTElTVC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGNvbnN0IFBST0pFQ1RfTkFNRSA9IGUudGFyZ2V0LnRleHRDb250ZW50O1xyXG5cclxuICAgICAgcHJvamVjdFNlbGVjdGlvbihlLCBQUk9KRUNUX0xJU1QpO1xyXG5cclxuICAgICAgdGFza09wdGlvbnMoUFJPSkVDVF9OQU1FKTtcclxuXHJcbiAgICAgIHJlbmRlclRhc2tzKFBST0pFQ1RfTkFNRSwgdGFza3NBcnIsIGdldENvbG9yKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBhZGRQcm9qZWN0LCBkaXNwbGF5UHJvamVjdFRhc2tzLCByZW5kZXJQcm9qZWN0Vmlld1xyXG4gIH07XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7IHByb2plY3RDcmVhdGlvbiB9OyIsImltcG9ydCB7IHByb2plY3RDcmVhdGlvbiB9IGZyb20gJy4vcHJvamVjdERvbSc7XHJcbmltcG9ydCB7IHRhc2tDcmVhdGlvbiB9IGZyb20gJy4vdGFza0RvbSc7XHJcblxyXG4vLyBPYmplY3QncyBhcnJheXNcclxubGV0IHByb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvamVjdHMnKSkgfHwgW107XHJcblxyXG5jb25zdCB0YXNrcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tzJykpIHx8IFtdO1xyXG5cclxuLy8gQ2xhc3MgQ29uc3RydWN0b3JcclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrIHtcclxuICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0ID0gJ2RlZmF1bHQnKSB7XHJcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG4gICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuICAgIHRoaXMuZXhpc3RzID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIGNyZWF0ZSB0YXNrIG9iamVjdFxyXG4gIHN0YXRpYyBuZXdUYXNrKHRhc2tzQXJyLCBuYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHksIHByb2plY3QpIHtcclxuICAgIGNvbnN0IG5ld1Rhc2sgPSBuZXcgVGFzayhuYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHksIHByb2plY3QpO1xyXG4gICAgdGFza3NBcnIucHVzaChuZXdUYXNrKTtcclxuICB9O1xyXG5cclxuICAvLyBVSSBjb2xvciBsb2dpY1xyXG4gIHN0YXRpYyBnZXRDb2xvcihhcnIsIGkpIHtcclxuICAgIGxldCBjb2xvcjtcclxuICAgIGlmIChhcnJbaV0ucHJpb3JpdHkgPT09ICdsb3cnKSB7XHJcbiAgICAgIGNvbG9yID0gJ3N1Y2Nlc3MnO1xyXG4gICAgfSBlbHNlIGlmIChhcnJbaV0ucHJpb3JpdHkgPT09ICdtZWRpdW0nKSB7XHJcbiAgICAgIGNvbG9yID0gJ2luZm8nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29sb3IgPSAnZGFuZ2VyJztcclxuICAgIH1cclxuICAgIHJldHVybiBjb2xvcjtcclxuICB9O1xyXG5cclxuICAvLyBidXR0b24gbG9naWMgZm9yIHRhc2tzIGVkaXQvZGVsZXRlXHJcbiAgc3RhdGljIGJ1dHRvbkNvbG9yKGNvbG9yKSB7XHJcbiAgICBsZXQgYnRuRWRpdDtcclxuICAgIGxldCBidG5EZWxldGU7XHJcbiAgICBpZiAoY29sb3IgPT09ICdzdWNjZXNzJyB8fCBjb2xvciA9PT0gJ2luZm8nKSB7XHJcbiAgICAgIGJ0bkVkaXQgPSAnd2FybmluZyc7XHJcbiAgICAgIGJ0bkRlbGV0ZSA9ICdkYW5nZXInO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbG9yID09PSAnZGFuZ2VyJykge1xyXG4gICAgICBidG5FZGl0ID0gJ3ByaW1hcnknO1xyXG4gICAgICBidG5EZWxldGUgPSAnd2FybmluZyc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW2J0bkVkaXQsIGJ0bkRlbGV0ZV07XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xyXG4gIGNvbnN0cnVjdG9yKHRpdGxlKSB7XHJcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbmV3UHJvamVjdChwcm9qZWN0VGl0bGUsIHByb2plY3RBcnIpIHtcclxuICAgIGNvbnN0IE5FV19QUk9KRUNUID0gbmV3IFByb2plY3QocHJvamVjdFRpdGxlKTtcclxuICAgIHByb2plY3RBcnIucHVzaChORVdfUFJPSkVDVCk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBDYWxsIG9mIHByb2plY3QncyBmdW5jdGlvbiB3aXRoIGF0dGFjaGVkIGV2ZW50IGxpc3RlbmVyc1xyXG5wcm9qZWN0Q3JlYXRpb24ucmVuZGVyUHJvamVjdFZpZXcocHJvamVjdHMpO1xyXG5wcm9qZWN0Q3JlYXRpb24uYWRkUHJvamVjdChwcm9qZWN0cyk7XHJcbnByb2plY3RDcmVhdGlvbi5kaXNwbGF5UHJvamVjdFRhc2tzKHRhc2tzKTtcclxuXHJcbi8vIENhbGwgdGFza3MgZnVuY3Rpb25zIHdpdGggYXR0YWNoZWQgZXZlbnQgbGlzdGVuZXJzXHJcbnRhc2tDcmVhdGlvbi5jcmVhdGVOZXdUYXNrKHRhc2tzLCBUYXNrKTtcclxuXHJcblxyXG5jb25zb2xlLmxvZyhwcm9qZWN0cyk7XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9